language: python
sudo: true

python:
  - "3.4"
#  - "3.5"

before_install:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

install:
  - sudo apt-get update -qq
  - travis_retry sudo apt-get -y install python3-pyside
  - pip install flake8

script:
  - export PYTHONPATH="$PYTHONPATH:/usr/lib/python3/dist-packages"
  - echo $PYTHONPATH
  - ls /usr/lib/python3/dist-packages/PySide
  - python -c "import sys; print('/usr/lib/python3/dist-packages' in sys.path)"
  - python -c "import PySide; print(PySide.__version__)"
  - flake8 qtodotxt && py.test qtodotxt/test && qtodotxt/test/run-doctests.py
